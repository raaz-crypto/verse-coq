name: CI
on: [push, pull_request]
jobs:
  linux:
    name: 'Linux'
    runs-on: ubuntu-latest
    strategy:
      matrix:
        coq: [ '8.11', '8.10', '8.9', '8.8', '8.7', '8.6']
    container: coqorg/coq:${{ matrix.coq }}
    steps:

      # - name: Get the Repository
      #   run: |
      #     git --version
      #     echo -n current directory =
      #     pwd
      #     echo workspace  = "$GITHUB_WORKSPACE"

      #     echo repository = "$GITHUB_REPOSITORY"
      #     echo sha = $GITHUB_SHA

          # sudo git clone https://github.com/"$GITHUB_REPOSITORY"
          # sudo git checkout "$GITHUB_SHA"

      - name: Install docker command
        run: |
          sudo apt-get update
          sudo apt-get install apt-transport-https ca-certificates curl software-properties-common
          curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
          sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu bionic stable"
          sudo apt update
          sudo apt-cache policy docker-ce
          sudo apt-get install docker-ce

      # - name: Information
      #   run: |
      #     uname -a
      #     coqtop --version


      # - name: Build
      #   run: |
      #     eval $(opam config env)
      #     coqtop --version
      #     make all
      # - name: Test
      #   run: |
      #     eval $(opam config env)
      #     coqtop --version
      #     make test
      # - name: Documentation
      #   run: |
      #     eval $(opam config env)
      #     coqtop --version
      #     make html
      #     make all.pdf
